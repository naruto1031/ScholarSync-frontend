import { Suspense } from 'react'
import Loading from '../loading'
import { Session, getServerSession } from 'next-auth';
import { options } from '../options';

interface Greeting {
	greeting: string
}

const ServerComponent = async () => {
	const session = await getServerSession(options);
	const res = await fetch('http://127.0.0.1:8000/api/greeting', {
		headers: {
			'Authorization': `Bearer eyJ0eXAiOiJKV1QiLCJub25jZSI6IjQxQU9mMlRaeGQ0Q3B6UzFMLWhZQlk0aW9pLUFUbnhXWTFTMjdhX0xmY2siLCJhbGciOiJSUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTAwMDAtYzAwMC0wMDAwMDAwMDAwMDAiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8wNTkzMWYyYi0xN2ZmLTQyNjEtOGU0ZS0wZGU0YjE1NzBiODQvIiwiaWF0IjoxNjkwODkwNjc1LCJuYmYiOjE2OTA4OTA2NzUsImV4cCI6MTY5MDg5NjAzNSwiYWNjdCI6MCwiYWNyIjoiMSIsImFpbyI6IkFZUUFlLzhVQUFBQTJHSjg4ZjRUclNWZkZGQy9kcEwyRjFIRmhISkZ2RXU2ZkRzQWZCSFpnQi94Wnd3a2lhN0V2WEZxM2RpYlNuemtSRCtLNTNYZDJGMkgyNkVRTVJ2bytXYzAzakdYYU53U0NHNWtvNEM3dWFFbkY5ZlFId0g1SFhsMFY2MW1BcUM2eXV6K0I1R2IxenNPcTd1ajZ3VkdvNE9ReHlNMkFFdXFHWFVORjNJM2Rocz0iLCJhbHRzZWNpZCI6IjE6bGl2ZS5jb206MDAwMzAwMDA1Rjk3RjUyMCIsImFtciI6WyJwd2QiLCJtZmEiXSwiYXBwX2Rpc3BsYXluYW1lIjoic21hbmUtYXV0aCIsImFwcGlkIjoiYzZmMzU0NDgtOTI3Ny00NTUyLWEzZWUtMGQ5YzA0OTJjZmExIiwiYXBwaWRhY3IiOiIxIiwiZW1haWwiOiJrb25kb25hcnV0bzA4M0BnbWFpbC5jb20iLCJmYW1pbHlfbmFtZSI6Iui_keiXpCIsImdpdmVuX25hbWUiOiLmiJDkuroiLCJpZHAiOiJsaXZlLmNvbSIsImlkdHlwIjoidXNlciIsImlwYWRkciI6IjI0MGY6M2I6Y2MxOToxOmYwNDg6NjVlZToyMmNhOmUwNDIiLCJuYW1lIjoi6L-R6JekIOaIkOS6uiIsIm9pZCI6ImNjZjFkNjAwLTIwN2UtNGIyMy05MGI4LWU3YjI0ODA3NDNjZCIsInBsYXRmIjoiMyIsInB1aWQiOiIxMDAzMjAwMkEwMDAyMEVBIiwicmgiOiIwLkFXb0FLeC1UQmY4WFlVS09UZzNrc1ZjTGhBTUFBQUFBQUFBQXdBQUFBQUFBQUFCcUFPay4iLCJzY3AiOiJlbWFpbCBvcGVuaWQgcHJvZmlsZSBVc2VyLlJlYWQiLCJzaWduaW5fc3RhdGUiOlsia21zaSJdLCJzdWIiOiJmVjlZZmd5UHo2VUNhOERwbzZ0YmpueG55Y2sxX1FmdHdWdW0ybFA0Z0FFIiwidGVuYW50X3JlZ2lvbl9zY29wZSI6IkpQUiIsInRpZCI6IjA1OTMxZjJiLTE3ZmYtNDI2MS04ZTRlLTBkZTRiMTU3MGI4NCIsInVuaXF1ZV9uYW1lIjoibGl2ZS5jb20ja29uZG9uYXJ1dG8wODNAZ21haWwuY29tIiwidXRpIjoiTkRBS0xFU1JoMEMyVnAyVU5Cc0JBQSIsInZlciI6IjEuMCIsIndpZHMiOlsiNjJlOTAzOTQtNjlmNS00MjM3LTkxOTAtMDEyMTc3MTQ1ZTEwIiwiYjc5ZmJmNGQtM2VmOS00Njg5LTgxNDMtNzZiMTk0ZTg1NTA5Il0sInhtc19zdCI6eyJzdWIiOiJQLUFPb08yTHNUZ2JMOHVOczZ3YTNnVVVkbzM2UWR6Y1dtYkJWRlR0WGtBIn0sInhtc190Y2R0IjoxNjg0MTk4MzgxfQ.PncTjdPHyk9gyJYnxbimifIi3XYr8mac1AupDsK1VCekI6Jpth89aCM46HI_5Vo7mtXflGregDmp8hmGqfk7jS20bpJ6JoXmVBy8PAxYfAjrzlB8zTF26tib59tIr0ERvrYMlsgZhKYZKj89GUZBS8_jZ0ZhoVwiBu8ydxIV_-wF1LRPSPs8_QD3j19UtiBCl_SIfRst_ctGw7C_CitFYJKgbkqzO0BCh7M87UrBuLpmJQ12c60lgR7h_WLUu3veQb13AJxZMpsuPvQDJiC6Etlaqq_aV5YZ6f523LT4V9N0FUzon3ENadDj9UEkuruugu63TzhmiDxNHaJNiVDBAQ`
		}
	});
	const data = res;

	console.log(data)

	return (
		<>
			<Suspense fallback={<Loading />}>
				<h1>ServerComponent:</h1>
			</Suspense>
		</>
	)
}

export default ServerComponent
